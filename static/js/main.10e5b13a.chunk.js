(this["webpackJsonpultimate-stats"]=this["webpackJsonpultimate-stats"]||[]).push([[0],{30:function(e,t,a){e.exports=a(49)},35:function(e,t,a){},36:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(27),m=a.n(l),s=(a(35),a(1)),r=a(5),o=a(10),u=(a(36),a(18));a(40),a(41);function i(){return c.a.createElement("header",{className:"app-header"},c.a.createElement("h1",null,"AFC Premier League Stats"))}function b(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),l=a[0],m=a[1];return c.a.createElement("div",{className:"App"},c.a.createElement(i,null),c.a.createElement("div",{className:"home-content"},!e.userID&&c.a.createElement("div",{className:"home-form"},c.a.createElement("p",null,"Who is taking stats?"),c.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.setUserID(l),localStorage.setItem("userID",l)}},c.a.createElement("input",{id:"home-input",type:"text",value:l,onChange:function(e){m(e.target.value)}}),c.a.createElement("button",{className:"btn",type:"submit"},"Start"))),e.userID&&c.a.createElement("div",null,c.a.createElement("p",null,"Welcome, ".concat(e.userID)),c.a.createElement("div",{className:"home-btn-group"},c.a.createElement(r.b,{className:"btn",to:"/stats"},"Stats"),c.a.createElement(r.b,{className:"btn",to:"/subs"},"Subs"),c.a.createElement(r.b,{className:"btn",to:"/teams"},"Teams"),c.a.createElement(r.b,{className:"btn",to:"/games"},"Past Games")))))}a(46);function E(e){var t=Object(n.useState)("25"),a=Object(s.a)(t,2),l=a[0],m=a[1],r=Object(n.useState)(""),o=Object(s.a)(r,2),u=o[0],i=o[1],b=Object(n.useState)(""),E=Object(s.a)(b,2),f=E[0],v=E[1],d=Object(n.useState)(""),g=Object(s.a)(d,2),p=g[0],h=g[1],O=Object(n.useState)(""),S=Object(s.a)(O,2),j=S[0],N=S[1],T=Object(n.useState)(""),y=Object(s.a)(T,2),k=y[0],C=y[1],D=[c.a.createElement("option",{value:"",key:""})],w=!0,I=!1,P=void 0;try{for(var F,_=e.teams[Symbol.iterator]();!(w=(F=_.next()).done);w=!0){var A=F.value;D.push(c.a.createElement("option",{value:A.name,key:A.name},A.name))}}catch(B){I=!0,P=B}finally{try{w||null==_.return||_.return()}finally{if(I)throw P}}return c.a.createElement("div",{className:"game-setup card"},c.a.createElement("h3",{id:"setup-title"},"Game Setup"),c.a.createElement("label",{htmlFor:"game-length"},"Game Length (mins)"),c.a.createElement("input",{name:"game-length",type:"number",min:"1",max:"120",value:l,onChange:function(e){return m(e.target.value)}}),c.a.createElement("label",{htmlFor:"dark-team"},"Select Dark Team"),c.a.createElement("select",{name:"dark-team",value:u,onChange:function(e){return i(e.target.value)}},D),c.a.createElement("label",{htmlFor:"light-team"},"Select Light Team"),c.a.createElement("select",{name:"light-team",value:f,onChange:function(e){return v(e.target.value)}},D),c.a.createElement("label",{htmlFor:"stat-team"},"Taking Stats For"),c.a.createElement("select",{name:"stat-team",value:p,onChange:function(e){return h(e.target.value)}},c.a.createElement("option",null),c.a.createElement("option",null,"".concat(u)),c.a.createElement("option",null,"".concat(f))),c.a.createElement("label",{htmlFor:"offence-team"},"Team on Offence"),c.a.createElement("select",{name:"offence-team",value:j,onChange:function(e){return N(e.target.value)}},c.a.createElement("option",null),c.a.createElement("option",null,"".concat(u)),c.a.createElement("option",null,"".concat(f))),c.a.createElement("button",{className:"btn",onClick:function(t){var a;(t.preventDefault(),u&&f&&p&&j)?(a=p===j,e.finishSetup(l,u,f,p,a)):C("Please choose all options")}},"Finish Setup"),k&&c.a.createElement("span",{className:"form-err"},k))}a(47);function f(e){return window.onbeforeunload=function(){return"Reloading will delete any ongoing game..."},c.a.createElement("div",{className:"App"},c.a.createElement("div",{className:"stats"},e.showSetup&&c.a.createElement(E,{teams:e.teams,finishSetup:e.finishSetup}),!e.showSetup&&c.a.createElement("div",null,c.a.createElement("h1",null,"Taking Stats..."),c.a.createElement("p",null,"".concat(e.gameLength," minute game between")),c.a.createElement("p",null,"".concat(e.darkTeam," (Dark) vs ").concat(e.lightTeam," (Light)")),c.a.createElement("p",null,"Taking stats for ".concat(e.statTeam)),c.a.createElement("p",null,"".concat(e.statTeam," starting on \n                        ").concat(e.offence?"Offence":"Defence")))))}function v(e){return c.a.createElement("div",{className:"App"},c.a.createElement("h1",null,"SUBS - TODO"))}var d=a(13),g=function(e){var t=Object(n.useState)(e.player),a=Object(s.a)(t,2),l=a[0],m=a[1];return c.a.createElement("input",{className:"player-card",name:e.ind,value:l,onChange:function(t){m(t.target.value);var a=Object(d.a)(e.teams),n=a.findIndex((function(t){return t.name===e.team.name})),c=parseInt(t.target.name);a[n].players[c]=t.target.value,e.setTeams(a)}})},p=function(e){var t=e.team.players.map((function(t,a){return c.a.createElement(g,{player:t,ind:a,key:a,teams:e.teams,setTeams:e.setTeams,team:e.team})}));return c.a.createElement("div",{className:"player-list"},t)};function h(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),l=a[0],m=a[1],r=function(){m(!l)};return c.a.createElement("div",{className:"card team-card"},c.a.createElement("div",{className:"team-name"},c.a.createElement("span",null,"".concat(e.team.name))),c.a.createElement("div",{className:"card-info"},c.a.createElement("span",{className:"gm-name"},"GM: ".concat(e.team.gm)),c.a.createElement("span",{className:"card-link",onClick:r},c.a.createElement("span",null,"Players"),!l&&c.a.createElement("i",{className:"material-icons md-18"},"arrow_drop_down"),l&&c.a.createElement("i",{className:"material-icons md-18"},"arrow_drop_up"))),l&&c.a.createElement("div",{className:"card-players"},c.a.createElement(p,{team:e.team,teams:e.teams,setTeams:e.setTeams}),c.a.createElement("button",{className:"btn btn-del",name:e.ind,onClick:e.deleteTeam},"Delete Team"),c.a.createElement("button",{className:"btn",onClick:function(){e.saveTeams(),r()}},"Save Changes")))}a(48);var O=function(e){var t=e.teams.map((function(t,a){return c.a.createElement(h,{team:t,ind:a,key:t.name,teams:e.teams,setTeams:e.setTeams,saveTeams:e.saveTeams,deleteTeam:e.deleteTeam})}));return c.a.createElement("div",{className:"team-list"},t)};function S(e){var t=e.localDB,a=Object(n.useState)(""),l=Object(s.a)(a,2),m=l[0],r=l[1],o=Object(n.useState)(""),u=Object(s.a)(o,2),i=u[0],b=u[1],E=Object(n.useState)(!1),f=Object(s.a)(E,2),v=f[0],g=f[1],p=["Player1","Player2","Player3","Player4","Player5","Player6","Player7","Player8","Player9","Player10"],h=function(e){switch(e.target.name){case"team-name":r(e.target.value);break;case"team-gm":b(e.target.value);break;default:console.log("State not updated!")}};return c.a.createElement("div",{className:"App"},c.a.createElement(O,{teams:e.teams,setTeams:e.setTeams,saveTeams:function(){console.log("Saving Teams");var a=Object(d.a)(e.teams);t.get("team-doc").then((function(e){return e.teams=a,t.put(e)})).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))},deleteTeam:function(a){var n=parseInt(a.target.name),c=Object(d.a)(e.teams);c.splice(n,1),e.setTeams(c),t.get("team-doc").then((function(e){return e.teams=c,t.put(e)})).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))}}),!v&&c.a.createElement("button",{className:"btn",onClick:function(){g(!0)}},"Add Team"),v&&c.a.createElement("div",{className:"add-team-form"},c.a.createElement("label",{htmlFor:"team-name"},"Team Name: "),c.a.createElement("input",{name:"team-name",onChange:h,value:m}),c.a.createElement("label",{htmlFor:"team-gm"},"Team GM: "),c.a.createElement("input",{name:"team-gm",onChange:h,value:i}),c.a.createElement("button",{className:"btn",onClick:function(a){a.preventDefault();var n,c=Object(d.a)(e.teams);c.push({name:m,gm:i,players:p}),e.setTeams(c),n=c,t.get("team-doc").then((function(e){return e.teams=n,t.put(e)})).then((function(e){return console.log(e)})).catch((function(e){"not_found"===e.name?(t.put({_id:"team-doc",teams:n}),console.log("New Team doc created")):console.log(e)})),r(""),b(""),g(!1)}},"Create Team"),c.a.createElement("button",{className:"btn nmt",onClick:function(){return g(!1)}},"Cancel")))}function j(){return c.a.createElement("div",{className:"App"},c.a.createElement("h1",null,"GAMES - TODO"))}var N=function(){var e=Object(n.useState)(!0),t=Object(s.a)(e,2),a=t[0],l=t[1],m=Object(n.useState)(localStorage.getItem("userID")||""),i=Object(s.a)(m,2),E=i[0],d=i[1],g=Object(n.useState)(new u.a("".concat("https://db-couchdb.duckdns.org","/ultimate-stats"))),p=Object(s.a)(g,1)[0],h=Object(n.useState)(new u.a("ultimate-stats")),O=Object(s.a)(h,1)[0],N=Object(n.useState)([]),T=Object(s.a)(N,2),y=T[0],k=T[1],C=Object(n.useState)(25),D=Object(s.a)(C,2),w=D[0],I=D[1],P=Object(n.useState)(""),F=Object(s.a)(P,2),_=F[0],A=F[1],B=Object(n.useState)(""),x=Object(s.a)(B,2),G=x[0],L=x[1],U=Object(n.useState)([]),W=Object(s.a)(U,2),M=(W[0],W[1],Object(n.useState)(!0)),J=Object(s.a)(M,2),H=J[0],R=J[1],$=Object(n.useState)(""),q=Object(s.a)($,2),z=q[0],K=q[1],Q=Object(n.useState)(!0),V=Object(s.a)(Q,2),X=V[0],Y=V[1],Z=Object(n.useCallback)((function(){p&&(l(!0),p.allDocs({include_docs:!0}).then((function(e){console.log("Documents fetched"),console.log(e),l(!1),e.rows.forEach((function(e){"team-doc"===e.doc._id&&k(e.doc.teams)}))})))}),[p]);return Object(n.useEffect)((function(){p&&(p.info(),Z())}),[p,Z]),Object(n.useEffect)((function(){var e;if(!a&&O&&p)return e=O.sync(p,{live:!0,retry:!0,include_docs:!0}).on("change",(function(e){console.log("Database Change"),console.log(e);var t,a=e.change.docs[0];"pull"===e.direction?(t=a,console.log(t),console.log("Updated: ".concat(a._id))):console.log("This was a local change")})).on("active",(function(){return console.log("Sync Active")})).on("error",(function(){return console.log("Database Sync Error")})),function(){e.cancel(),console.log("Sync Cancelled")}}),[a,O,p]),c.a.createElement(r.a,null,c.a.createElement(o.d,null,c.a.createElement(o.b,{path:"/",exact:!0},c.a.createElement(b,{userID:E,setUserID:d,localDB:O})),c.a.createElement(o.b,{path:"/stats"},E?c.a.createElement(f,{userID:E,localDB:O,teams:y,showSetup:H,finishSetup:function(e,t,a,n,c){I(parseInt(e)),A(t),L(a),K(n),Y(c),R(!1)},gameLength:w,darkTeam:_,lightTeam:G,statTeam:z,offence:X}):c.a.createElement(o.a,{to:"/"})),c.a.createElement(o.b,{path:"/subs"},E?c.a.createElement(v,{userID:E,localDB:O}):c.a.createElement(o.a,{to:"/"})),c.a.createElement(o.b,{path:"/teams"},E?c.a.createElement(S,{teams:y,setTeams:k,localDB:O}):c.a.createElement(o.a,{to:"/"})),c.a.createElement(o.b,{path:"/games"},c.a.createElement(j,null))),c.a.createElement("div",{className:"bottom-nav"},c.a.createElement(r.c,{className:"nav-link",to:"/",exact:!0,activeClassName:"nav-active"},"Home"),c.a.createElement(r.c,{className:"nav-link",to:"/stats",activeClassName:"nav-active"},"Stats"),c.a.createElement(r.c,{className:"nav-link",to:"/subs",activeClassName:"nav-active"},"Subs"),c.a.createElement(r.c,{className:"nav-link",to:"/teams",activeClassName:"nav-active"},"Teams"),c.a.createElement(r.c,{className:"nav-link",to:"/games",activeClassName:"nav-active"},"Games")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));m.a.render(c.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[30,1,2]]]);
//# sourceMappingURL=main.10e5b13a.chunk.js.map