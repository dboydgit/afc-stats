(this["webpackJsonpultimate-stats"]=this["webpackJsonpultimate-stats"]||[]).push([[0],{40:function(e,a,t){e.exports=t(65)},45:function(e,a,t){},46:function(e,a,t){},50:function(e,a,t){},51:function(e,a,t){},56:function(e,a,t){},57:function(e,a,t){},58:function(e,a,t){},62:function(e,a,t){},65:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(17),s=t.n(c),l=(t(45),t(2)),o=t(10),m=t(15),i=(t(46),t(23));t(50),t(51);function u(){return r.a.createElement("header",{className:"app-header"},r.a.createElement("h1",null,"AFC Premier League Stats"))}function d(e){var a=Object(n.useState)(""),t=Object(l.a)(a,2),c=t[0],s=t[1];return r.a.createElement("div",{className:"App"},r.a.createElement(u,null),r.a.createElement("div",{className:"home-content"},!e.userID&&r.a.createElement("div",{className:"home-form"},r.a.createElement("p",null,"Who is taking stats?"),r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e.setUserID(c),localStorage.setItem("userID",c)}},r.a.createElement("input",{id:"home-input",type:"text",value:c,onChange:function(e){s(e.target.value)}}),r.a.createElement("button",{className:"btn",type:"submit"},"Start"))),e.userID&&r.a.createElement("div",null,r.a.createElement("p",null,"Welcome, ".concat(e.userID)),r.a.createElement("div",{className:"home-btn-group"},r.a.createElement(o.b,{className:"btn",to:"/stats"},"Stats"),r.a.createElement(o.b,{className:"btn",to:"/subs"},"Subs"),r.a.createElement(o.b,{className:"btn",to:"/teams"},"Teams"),r.a.createElement(o.b,{className:"btn",to:"/games"},"Past Games")))))}var b=t(14),p=t(28),g=t(6);t(56);function f(e){var a=Object(n.useState)("25"),t=Object(l.a)(a,2),c=t[0],s=t[1],o=Object(n.useState)(""),m=Object(l.a)(o,2),i=m[0],u=m[1],d=Object(n.useState)(""),b=Object(l.a)(d,2),p=b[0],g=b[1],f=Object(n.useState)(""),E=Object(l.a)(f,2),v=E[0],y=E[1],h=Object(n.useState)(""),S=Object(l.a)(h,2),T=S[0],O=S[1],k=Object(n.useState)(""),N=Object(l.a)(k,2),j=N[0],C=N[1],G=[r.a.createElement("option",{value:"",key:""})],D=!0,w=!1,P=void 0;try{for(var A,H=e.teams[Symbol.iterator]();!(D=(A=H.next()).done);D=!0){var _=A.value;G.push(r.a.createElement("option",{value:_.name,key:_.name},_.name))}}catch(F){w=!0,P=F}finally{try{D||null==H.return||H.return()}finally{if(w)throw P}}return r.a.createElement("div",{className:"game-setup card"},r.a.createElement("h3",{id:"setup-title"},"Game Setup"),r.a.createElement("label",{htmlFor:"game-length"},"Game Length (mins)"),r.a.createElement("input",{name:"game-length",type:"number",min:"1",max:"120",value:c,onChange:function(e){return s(e.target.value)}}),r.a.createElement("label",{htmlFor:"dark-team"},"Select Dark Team"),r.a.createElement("select",{name:"dark-team",value:i,onChange:function(e){return u(e.target.value)}},G),r.a.createElement("label",{htmlFor:"light-team"},"Select Light Team"),r.a.createElement("select",{name:"light-team",value:p,onChange:function(e){return g(e.target.value)}},G),r.a.createElement("label",{htmlFor:"stat-team"},"Taking Stats For"),r.a.createElement("select",{name:"stat-team",value:v,onChange:function(e){return y(e.target.value)}},r.a.createElement("option",null),r.a.createElement("option",null,"".concat(i)),r.a.createElement("option",null,"".concat(p))),r.a.createElement("label",{htmlFor:"offence-team"},"Team on Offence"),r.a.createElement("select",{name:"offence-team",value:T,onChange:function(e){return O(e.target.value)}},r.a.createElement("option",null),r.a.createElement("option",null,"".concat(i)),r.a.createElement("option",null,"".concat(p))),r.a.createElement("div",{id:"test-game-checkbox",onChange:function(a){a.target.checked?e.setTestGame(!0):e.setTestGame(!1)}},r.a.createElement("input",{type:"checkbox"}),r.a.createElement("span",null,"Check for test game")),r.a.createElement("button",{className:"btn",onClick:function(){var a;(function(e){var a=parseInt(e);return a>=1&&a<=120})(c)?i&&p&&v&&T?(a=v===T,e.finishSetup(c,i,p,v,a)):C("Please choose all options"):C("Time should be between 1 - 120 mins")}},"Finish Setup"),j&&r.a.createElement("span",{className:"form-err"},j))}function E(e){return r.a.createElement("div",{className:"game-info"},r.a.createElement("div",{className:"score-card dark"},r.a.createElement("span",{id:"team-name"},e.darkTeam),r.a.createElement("span",{className:"score dark"},e.score.dark)),r.a.createElement("div",{className:"game-clock"},r.a.createElement("span",null,"".concat(e.gameTime)),r.a.createElement("div",{className:"timer-controls"},r.a.createElement("i",{className:"material-icons timer-control",onClick:function(){e.startTimer(),e.setPaused(!1),console.log("start timer")}},"play_arrow"),!e.paused&&r.a.createElement("i",{className:"material-icons timer-control",onClick:function(){e.pauseTimer(),e.setPaused(!0),console.log("pause timer")}},"pause"),e.paused&&r.a.createElement("i",{className:"material-icons timer-control",onClick:function(){e.resetTimer(),e.pauseTimer(),e.setPaused(!1),console.log("reset timer")}},"replay"))),r.a.createElement("div",{className:"score-card light"},r.a.createElement("span",{id:"team-name"},e.lightTeam),r.a.createElement("span",{className:"score light"},e.score.light)))}t(57);var v=t(4),y=function(e){var a=!1,t=!0,n=!1,c=!1;return e.prevEntry.action&&!e.prevEntry.turnover||(a=!0),e.prevEntry.turnover||e.prevEntry.player!==e.player.name||(n=!0,t=!1,c=!0),r.a.createElement("div",{className:"stat-btns"},r.a.createElement("button",{className:"btn stat-btn ".concat(n?"btn-inactive":""),name:"Touch",onClick:function(a){return e.handleStatClick(a,e.player.name,!1)}},"Touch",r.a.createElement("div",{className:"score-badge"},e.player.Touch),0!==e.player.Assist&&r.a.createElement("div",{className:"score-badge assist"},"".concat(e.player.Assist,"-A"))),r.a.createElement("button",{className:"btn stat-btn ".concat(a?"btn-inactive":""),name:"Point",onClick:function(a){return e.handleStatClick(a,e.player.name)}},"Point",r.a.createElement("div",{className:"score-badge"},e.player.Point)),r.a.createElement("button",{className:"btn stat-btn ".concat(a||t?"btn-inactive":""),name:"T-Away",onClick:function(a){return e.handleStatClick(a,e.player.name)}},"T-Away",r.a.createElement("div",{className:"score-badge"},e.player["T-Away"])),r.a.createElement("button",{className:"btn stat-btn ".concat(a||c?"btn-inactive":""),name:"Drop",onClick:function(a){return e.handleStatClick(a,e.player.name)}},"Drop",r.a.createElement("div",{className:"score-badge"},e.player.Drop)))},h=function(e){return r.a.createElement("div",{className:"stat-btns"},r.a.createElement("button",{className:"btn stat-btn",name:"D-Play",onClick:function(a){return e.handleStatClick(a,e.player.name)}},"D-Play",r.a.createElement("div",{className:"score-badge"},e.player["D-Play"])),r.a.createElement("button",{className:"btn stat-btn",name:"GSO",onClick:function(a){return e.handleStatClick(a,e.player.name)}},"GSO",r.a.createElement("div",{className:"score-badge"},e.player.GSO)),r.a.createElement("button",{className:"btn stat-btn",name:"GSO-Mark",onClick:function(a){return e.handleStatClick(a,e.player.name)}},"GSO-Mark",r.a.createElement("div",{className:"score-badge"},e.player["GSO-Mark"])))},S=function(e){var a=e.playerStats.map((function(a){return r.a.createElement("div",{key:a.name,className:"player-input"},r.a.createElement("div",{className:"player-name ".concat(e.darkTeam===e.statTeam?"dark":"")},r.a.createElement("span",{className:"player-text"},a.name)),e.offense&&r.a.createElement(y,{player:a,handleStatClick:e.handleStatClick,prevEntry:e.prevEntry}),!e.offense&&r.a.createElement(h,{player:a,handleStatClick:e.handleStatClick}))}));return r.a.createElement("div",{className:"player-list"},a)};function T(e){window.onbeforeunload=function(a){e.showSetup||(a.returnValue="Game will not be saved.")};var a=Object(n.useState)(!1),t=Object(l.a)(a,2),c=t[0],s=t[1],o=Object(n.useState)(""),m=Object(l.a)(o,2),i=m[0],u=m[1],d=Object(n.useState)({action:"",player:"",turnover:!1}),y=Object(l.a)(d,2),h=y[0],T=y[1],O=function(a){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];v.c.dismiss();var c=a.currentTarget.name,s=Object(g.a)(e.gameHistory),l=s[s.length-1]||"",o="";if(!l||"Point"!==c&&"Drop"!==c||(o=l.player),!e.offense||"Touch"===c||!l.turnover&&s.length){if("Touch"===c&&!l.turnover){if(n===l.player)return void v.c.error("Cannot touch the disc twice in a row");o=l.player}if("T-Away"===c){if("Touch"!==l.action)return void v.c.error("Throwaway can only be recorded following a touch");if(l.player!==n)return console.log(l.player),void v.c.error("Only player in possession (".concat(l.player,") can throwaway"))}var m=Object(p.a)({},e.score);"Point"===c&&(e.statTeam===e.darkTeam?m.dark++:m.light++),"GSO"!==c&&"GSO-Mark"!==c||(e.statTeam===e.darkTeam?m.light++:m.dark++),e.setScore(m);var i=new Date,u=(t={date:i.toDateString(),time:i.toTimeString(),gameTime:e.gameTime,statTeam:e.statTeam},Object(b.a)(t,"".concat(e.darkTeam,"_score"),m.dark),Object(b.a)(t,"".concat(e.lightTeam,"_score"),m.light),Object(b.a)(t,"action",c),Object(b.a)(t,"player",n),Object(b.a)(t,"lastPlayer",o),Object(b.a)(t,"turnover",r),t),d=Object(g.a)(e.playerStats);d.forEach((function(e){e.name===n&&("Drop"===c&&e.Touch++,e[c]++),"Point"===c&&e.name===o&&e.Assist++})),e.setPlayerStats(d),console.log("".concat(n,": ").concat(c,": gameClock: ").concat(e.gameTime,": \n            time: ").concat(u.time)),v.c.success("Last Entry: ".concat(c).concat(n?" - "+n:""," ").concat(o?" from "+o:"")),T({action:c,player:n,turnover:r}),r&&e.toggleOffense(),s.push(u),e.setGameHistory(s)}else v.c.error("First action of a possession must be a touch")};return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"stats"},e.showSetup&&r.a.createElement(f,{teams:e.teams,finishSetup:e.finishSetup,setTestGame:e.setTestGame}),!e.showSetup&&r.a.createElement("div",{className:"game-stats"},e.testGame&&r.a.createElement("div",{id:"test-notification"},r.a.createElement("p",{id:"test-text"},"Test Game")),r.a.createElement(E,{darkTeam:e.darkTeam,lightTeam:e.lightTeam,score:e.score,gameTime:e.gameTime,gameLength:e.gameLength,startTimer:e.startTimer,pauseTimer:e.pauseTimer,resetTimer:e.resetTimer,paused:e.paused,setPaused:e.setPaused}),r.a.createElement("div",{className:"game-options"},r.a.createElement("button",{className:"btn opt-btn",onClick:function(){window.confirm("Cancel Game? Progress will not be saved.")&&(v.c.dismiss(),v.c.error("Game Deleted",{autoClose:2e3}),e.resetGame())}},"Exit Game"),r.a.createElement("button",{className:"btn opt-btn",onClick:function(){v.c.dismiss(),v.c.success("Game Saved",{autoClose:2e3});var a={date:new Date,darkTeam:e.darkTeam,lightTeam:e.lightTeam,statTeam:e.statTeam,gameLength:e.gameLength,playerStats:e.playerStats,score:e.score,testGame:e.testGame,statTaker:e.userID,gameHistory:e.gameHistory},t=Object(g.a)(e.allGameHistory);t.unshift(a),e.setAllGameHistory(t),e.saveAllGames(t),e.resetGame()}},"Finish & Save"),r.a.createElement("button",{className:"btn opt-btn",onClick:function(){v.c.dismiss();var a=Object(g.a)(e.gameHistory),t=Object(p.a)({},e.score),n=a.pop();if(n){console.log("UNDO");var r=Object(g.a)(e.playerStats);if(r.forEach((function(e){e.name===n.player&&("Drop"===n.action&&e.Touch--,e[n.action]--),"Point"===n.action&&n.lastPlayer===e.name&&e.Assist--})),e.setPlayerStats(r),n.turnover&&e.toggleOffense(),"Point"===n.action&&(e.statTeam===e.darkTeam?t.dark--:t.light--),"GSO"!==n.action&&"GSO-Mark"!==n.action||(e.statTeam===e.darkTeam?t.light--:t.dark--),v.c.info("UNDO: ".concat(n.action," by ").concat(n.player)),e.setScore(t),e.setGameHistory(a),a.length){var c=a[a.length-1];T({action:c.action,player:c.player,turnover:c.turnover})}else T({action:"",player:"",turnover:!1})}else v.c.info("Nothing to undo")}},"Undo",r.a.createElement("i",{className:"material-icons md-18"},"undo"))),r.a.createElement(S,{offense:e.offense,playerStats:e.playerStats,setPlayerStats:e.setPlayerStats,statTeam:e.statTeam,darkTeam:e.darkTeam,handleStatClick:O,gameHistory:e.gameHistory,prevEntry:h}),!e.offense&&r.a.createElement("button",{className:"btn stat-btn stat-btn-after",name:"O-Error",onClick:function(e){return O(e)}},"Offensive Error"),!c&&r.a.createElement("button",{className:"btn stat-btn stat-btn-after",onClick:function(){return s(!0)}},"Add Player"),c&&r.a.createElement("div",{className:"add-player-input"},r.a.createElement("i",{className:"material-icons",onClick:function(){return s(!1)}},"close"),r.a.createElement("input",{placeholder:"player name",onChange:function(e){return u(e.target.value)},value:i}),r.a.createElement("button",{className:"btn stat-btn stat-btn-after",onClick:function(){return function(a){var t=Object(g.a)(e.playerStats);t.push({name:a,Touch:0,Assist:0,Point:0,"T-Away":0,Drop:0,"D-Play":0,GSO:0,"GSO-Mark":0}),e.setPlayerStats(t),s(!1),u("")}(i)}},"Save")))))}function O(e){return r.a.createElement("div",{className:"App"},r.a.createElement("h1",{className:"page-header"},"SUBS - TODO"))}var k=function(e){var a=Object(n.useState)(e.player),t=Object(l.a)(a,2),c=t[0],s=t[1];return r.a.createElement("div",{className:"player-list-item"},r.a.createElement("i",{className:"material-icons player-del",onClick:function(){e.deletePlayer(c)}},"delete"),r.a.createElement("input",{className:"player-card",name:e.ind,value:c,onChange:function(a){s(a.target.value);var t=Object(g.a)(e.teams),n=t.findIndex((function(a){return a.name===e.team.name})),r=parseInt(a.target.name);t[n].players[r]=a.target.value,e.setTeams(t)}}))},N=function(e){var a=e.team.players.map((function(a,t){return r.a.createElement(k,{player:a,ind:t,key:t,teams:e.teams,setTeams:e.setTeams,team:e.team,deletePlayer:e.deletePlayer})}));return r.a.createElement("div",{className:"player-list"},a)};function j(e){var a=Object(n.useState)(!1),t=Object(l.a)(a,2),c=t[0],s=t[1],o=function(){s(!c)};return r.a.createElement("div",{className:"card team-card"},r.a.createElement("div",{className:"team-name"},r.a.createElement("span",null,"".concat(e.team.name))),r.a.createElement("div",{className:"card-info"},r.a.createElement("span",{className:"gm-name"},"GM: ".concat(e.team.gm)),r.a.createElement("span",{className:"card-link",onClick:o},r.a.createElement("span",null,"Players"),!c&&r.a.createElement("i",{className:"material-icons md-18"},"arrow_drop_down"),c&&r.a.createElement("i",{className:"material-icons md-18"},"arrow_drop_up"))),c&&r.a.createElement("div",{className:"card-players"},r.a.createElement(N,{team:e.team,teams:e.teams,setTeams:e.setTeams,deletePlayer:function(a){var t=Object(g.a)(e.teams),n=!0,r=!1,c=void 0;try{for(var s,l=t[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var o=s.value;if(o.name!==e.team.name);else{var m=o.players.findIndex((function(e){return e===a}));o.players.splice(m,1)}}}catch(i){r=!0,c=i}finally{try{n||null==l.return||l.return()}finally{if(r)throw c}}e.setTeams(t)}}),r.a.createElement("button",{className:"btn team-btn btn-del",name:e.ind,onClick:e.deleteTeam},"Delete Team"),r.a.createElement("button",{className:"btn team-btn",onClick:function(){var a=Object(g.a)(e.teams),t=!0,n=!1,r=void 0;try{for(var c,s=a[Symbol.iterator]();!(t=(c=s.next()).done);t=!0){var l=c.value;l.name!==e.team.name||l.players.push("New Player")}}catch(o){n=!0,r=o}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}e.setTeams(a)}},"Add Player"),r.a.createElement("button",{className:"btn team-btn",onClick:function(){e.saveTeams(),o()}},"Save Changes")))}t(58);var C=function(e){var a=e.teams.map((function(a,t){return r.a.createElement(j,{team:a,ind:t,key:a.name,teams:e.teams,setTeams:e.setTeams,saveTeams:e.saveTeams,deleteTeam:e.deleteTeam})}));return r.a.createElement("div",{className:"team-list"},a)};function G(e){var a=e.localDB,t=Object(n.useState)(""),c=Object(l.a)(t,2),s=c[0],o=c[1],m=Object(n.useState)(""),i=Object(l.a)(m,2),u=i[0],d=i[1],b=Object(n.useState)(!1),p=Object(l.a)(b,2),f=p[0],E=p[1],v=["Player1","Player2","Player3","Player4","Player5","Player6","Player7","Player8","Player9","Player10"],y=function(e){switch(e.target.name){case"team-name":o(e.target.value);break;case"team-gm":d(e.target.value);break;default:console.log("State not updated!")}};return r.a.createElement("div",{className:"App"},r.a.createElement("h1",{className:"page-header"},"Teams"),r.a.createElement(C,{teams:e.teams,setTeams:e.setTeams,saveTeams:function(){console.log("Saving Teams");var t=Object(g.a)(e.teams);a.get("team-doc").then((function(e){return e.teams=t,a.put(e)})).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))},deleteTeam:function(t){var n=parseInt(t.target.name),r=Object(g.a)(e.teams);r.splice(n,1),e.setTeams(r),a.get("team-doc").then((function(e){return e.teams=r,a.put(e)})).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))}}),!f&&r.a.createElement("button",{className:"btn",onClick:function(){E(!0)}},"Add Team"),f&&r.a.createElement("div",{className:"add-team-form"},r.a.createElement("label",{htmlFor:"team-name"},"Team Name: "),r.a.createElement("input",{name:"team-name",onChange:y,value:s}),r.a.createElement("label",{htmlFor:"team-gm"},"Team GM: "),r.a.createElement("input",{name:"team-gm",onChange:y,value:u}),r.a.createElement("button",{className:"btn",onClick:function(t){t.preventDefault();var n,r=Object(g.a)(e.teams);r.push({name:s,gm:u,players:v}),e.setTeams(r),n=r,a.get("team-doc").then((function(e){return e.teams=n,a.put(e)})).then((function(e){return console.log(e)})).catch((function(e){"not_found"===e.name?(a.put({_id:"team-doc",teams:n}),console.log("New Team doc created")):console.log(e)})),o(""),d(""),E(!1)}},"Create Team"),r.a.createElement("button",{className:"btn nmt",onClick:function(){return E(!1)}},"Cancel")))}var D=t(29),w=(t(62),t(30));function P(e){var a=Object(n.useMemo)((function(){return[{Header:"Name",accessor:"name"},{Header:"Point",accessor:"Point",sortDescFirst:!0},{Header:"Assist",accessor:"Assist",sortDescFirst:!0},{Header:"Touch",accessor:"Touch",sortDescFirst:!0},{Header:"DPlay",accessor:"D-Play",sortDescFirst:!0},{Header:"TAway",accessor:"T-Away",sortDescFirst:!0},{Header:"Drop",accessor:"Drop",sortDescFirst:!0},{Header:"GSO",accessor:"GSO",sortDescFirst:!0},{Header:"GSO-Mark",accessor:"GSO-Mark",sortDescFirst:!0}]}),[]),t=Object(n.useMemo)((function(){return e.stats}),[e.stats]),c=Object(w.b)({data:t,columns:a},w.a),s=c.getTableProps,l=c.getTableBodyProps,o=c.headerGroups,m=c.rows,i=c.prepareRow;return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"stat-table stat-table-title"},"Game Stats - Touch headers to sort"),r.a.createElement("table",Object.assign({className:"stat-table"},s()),r.a.createElement("thead",null,o.map((function(e){return r.a.createElement("tr",e.getHeaderGroupProps(),e.headers.map((function(e){return r.a.createElement("th",e.getHeaderProps(e.getSortByToggleProps()),e.render("Header"),r.a.createElement("span",null,e.isSorted?e.isSortedDesc?r.a.createElement("i",{className:"material-icons md-18"},"arrow_drop_down"):r.a.createElement("i",{className:"material-icons md-18"},"arrow_drop_up"):""))})))}))),r.a.createElement("tbody",l(),m.map((function(e,a){return i(e),r.a.createElement("tr",e.getRowProps(),e.cells.map((function(e){return r.a.createElement("td",e.getCellProps(),e.render("Cell"))})))})))))}var A=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"Game Deleted..."),r.a.createElement("button",{className:"btn toast-btn",onClick:function(){e.toggleDeleteGame(e.game.date),e.closeToast()}},"Undo",r.a.createElement("i",{className:"material-icons md-18"},"undo")))},H=function(e){var a=Object(n.useState)(!1),t=Object(l.a)(a,2),c=t[0],s=t[1],o=e.game,m=new Date(o.date),i="".concat(m.getFullYear(),"-").concat(m.getMonth()+1,"-").concat(m.getDay(),"-").concat(o.darkTeam,"-vs-").concat(o.lightTeam,"-GAME-").concat(o.statTeam,".csv"),u="".concat(m.getFullYear(),"-").concat(m.getMonth()+1,"-").concat(m.getDay(),"-").concat(o.darkTeam,"-vs-").concat(o.lightTeam,"-STATS-").concat(o.statTeam,".csv"),d=function(){return s(!c)};return r.a.createElement("div",{className:"card game-list-card"},r.a.createElement("div",{className:"game-list-info"},r.a.createElement("span",null,new Date(o.date).toDateString()),r.a.createElement("span",null,"Stat Taker: ".concat(o.statTaker))),r.a.createElement("div",{className:"game-list-info"},r.a.createElement("span",null,"Stats For: ".concat(o.statTeam)),o.testGame&&r.a.createElement("span",{className:"test-game"},"Test Game")),r.a.createElement("div",{className:"game-score"},r.a.createElement("div",{className:"score-card score-card-games dark"},r.a.createElement("span",{id:"team-name"},o.darkTeam),r.a.createElement("span",{className:"score dark"},o.score.dark)),r.a.createElement("div",{className:"score-card score-card-games light"},r.a.createElement("span",{id:"team-name"},o.lightTeam),r.a.createElement("span",{className:"score light"},o.score.light))),r.a.createElement("div",{className:"game-list-btns"},r.a.createElement(D.CSVLink,{className:"btn game-list-btn",data:o.gameHistory,filename:i,target:"_blank"},"Game CSV",r.a.createElement("i",{className:"material-icons md-18"},"get_app")),r.a.createElement(D.CSVLink,{className:"btn game-list-btn",data:o.playerStats,headers:[{label:"Name",key:"name"},{label:"Touches",key:"Touch"},{label:"Points",key:"Point"},{label:"Assists",key:"Assist"},{label:"D-Plays",key:"D-Play"},{label:"Drops",key:"Drop"},{label:"Throwaways",key:"T-Away"},{label:"GSO",key:"GSO"},{label:"GSO-Mark",key:"GSO-Mark"}],filename:u,target:"_blank"},"Stats CSV",r.a.createElement("i",{className:"material-icons md-18"},"get_app")),!c&&r.a.createElement("button",{className:"btn game-list-btn",onClick:d},"Show Stats",r.a.createElement("i",{className:"material-icons md-18"},"arrow_drop_down")),c&&r.a.createElement("button",{className:"btn game-list-btn",onClick:d},"Hide Stats",r.a.createElement("i",{className:"material-icons md-18"},"arrow_drop_up"))),c&&r.a.createElement(r.a.Fragment,null,r.a.createElement(P,{stats:o.playerStats}),r.a.createElement("button",{className:"btn btn-del game-list-btn",onClick:function(){e.toggleDeleteGame(o.date),v.c.error(r.a.createElement(A,{game:o,toggleDeleteGame:e.toggleDeleteGame}),{autoClose:4e3,hideProgressBar:!1})}},"Delete Game")))},_=function(e){var a=e.games.filter((function(e){return!e.deleted})).map((function(a){return r.a.createElement(H,{key:a.date,game:a,toggleDeleteGame:e.toggleDeleteGame})}));return r.a.createElement("div",{className:"team-list"},a)};function F(e){return r.a.createElement("div",{className:"App"},r.a.createElement("h1",{className:"page-header"},"Recorded Games"),r.a.createElement(_,{games:e.allGameHistory,toggleDeleteGame:function(a){var t=Object(g.a)(e.allGameHistory),n=!0,r=!1,c=void 0;try{for(var s,l=t[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){var o=s.value;o.date===a&&(o.deleted=!o.deleted)}}catch(m){r=!0,c=m}finally{try{n||null==l.return||l.return()}finally{if(r)throw c}}e.setAllGameHistory(t),e.saveAllGames(t)}}))}var I=t(39),x=t.n(I),M=(t(64),Object(v.b)({enter:"toast-in",exit:"toast-out",duration:[500,100]}));var L=function(){var e=Object(n.useState)(!0),a=Object(l.a)(e,2),t=a[0],c=a[1],s=Object(n.useState)(localStorage.getItem("userID")||""),u=Object(l.a)(s,2),b=u[0],p=u[1],g=Object(n.useState)(new i.a("".concat("https://db-couchdb.duckdns.org","/ultimate-stats"))),f=Object(l.a)(g,1)[0],E=Object(n.useState)(new i.a("ultimate-stats")),y=Object(l.a)(E,1)[0],h=Object(n.useState)([]),S=Object(l.a)(h,2),k=S[0],N=S[1],j=Object(n.useState)([]),C=Object(l.a)(j,2),D=C[0],w=C[1],P=Object(n.useState)(25),A=Object(l.a)(P,2),H=A[0],_=A[1],I=Object(n.useState)(""),L=Object(l.a)(I,2),B=L[0],U=L[1],V=Object(n.useState)(""),W=Object(l.a)(V,2),R=W[0],J=W[1],Y=Object(n.useState)(!0),$=Object(l.a)(Y,2),q=$[0],z=$[1],K=Object(n.useState)(""),Q=Object(l.a)(K,2),X=Q[0],Z=Q[1],ee=Object(n.useState)([]),ae=Object(l.a)(ee,2),te=ae[0],ne=ae[1],re=Object(n.useState)(!0),ce=Object(l.a)(re,2),se=ce[0],le=ce[1],oe=Object(n.useState)({dark:0,light:0}),me=Object(l.a)(oe,2),ie=me[0],ue=me[1],de=Object(n.useState)([]),be=Object(l.a)(de,2),pe=be[0],ge=be[1],fe=Object(n.useState)(""),Ee=Object(l.a)(fe,2),ve=Ee[0],ye=Ee[1],he=Object(n.useState)(!1),Se=Object(l.a)(he,2),Te=Se[0],Oe=Se[1],ke=Object(n.useState)(!1),Ne=Object(l.a)(ke,2),je=Ne[0],Ce=Ne[1],Ge=Object(n.useState)(new x.a({countdown:!0,callback:function(e){ye(e.getTimeValues().toString(["minutes","seconds"]))}})),De=Object(l.a)(Ge,1)[0],we=Object(n.useCallback)((function(){f&&(c(!0),f.allDocs({include_docs:!0}).then((function(e){console.log("Documents fetched"),console.log(e),c(!1),e.rows.forEach((function(e){"team-doc"===e.doc._id&&N(e.doc.teams),"game-history"===e.doc._id&&w(e.doc.games)}))})))}),[f]);Object(n.useEffect)((function(){f&&(f.info(),we())}),[f,we]),Object(n.useEffect)((function(){var e;if(!t&&y&&f)return e=y.sync(f,{live:!0,retry:!0,include_docs:!0}).on("change",(function(e){console.log("Database Change"),console.log(e);var a,t=e.change.docs[0];"pull"===e.direction?(a=t,console.log(a),console.log("Updated: ".concat(t._id))):console.log("This was a local change")})).on("active",(function(){return console.log("Sync Active")})).on("error",(function(){return console.log("Database Sync Error")})),function(){e.cancel(),console.log("Sync Cancelled")}}),[t,y,f]),Object(n.useEffect)((function(){ye("".concat(H.toString().padStart(2,0),":00"))}),[H]);var Pe=function(e){y.get("game-history").then((function(a){return a.games=e,y.put(a)})).then((function(e){return console.log(e)})).catch((function(a){"not_found"===a.name?y.put({_id:"game-history",games:e}):console.log(a)}))};return r.a.createElement(o.a,null,r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/",exact:!0},r.a.createElement(d,{userID:b,setUserID:p,localDB:y})),r.a.createElement(m.b,{path:"/stats"},b?r.a.createElement(T,{userID:b,teams:k,showSetup:q,finishSetup:function(e,a,t,n,r){_(parseInt(e)),U(a),J(t),Z(n),le(r),z(!1);var c=k.find((function(e){return e.name===n})),s=[],l=!0,o=!1,m=void 0;try{for(var i,u=c.players[Symbol.iterator]();!(l=(i=u.next()).done);l=!0){var d=i.value;s.push({name:d,Touch:0,Assist:0,Point:0,"T-Away":0,Drop:0,"D-Play":0,GSO:0,"GSO-Mark":0})}}catch(b){o=!0,m=b}finally{try{l||null==u.return||u.return()}finally{if(o)throw m}}ne(s)},gameLength:H,darkTeam:B,lightTeam:R,statTeam:X,offense:se,score:ie,setScore:ue,allGameHistory:D,setAllGameHistory:w,gameHistory:pe,setGameHistory:ge,gameTime:ve,startTimer:function(){return De.start({startValues:{minutes:H}})},pauseTimer:function(){return De.pause()},stopTimer:function(){return De.stop()},resetTimer:function(){De.reset(),ye("".concat(H.toString().padStart(2,0),":00"))},paused:Te,setPaused:Oe,playerStats:te,setPlayerStats:ne,toggleOffense:function(){le(!se)},testGame:je,setTestGame:Ce,saveAllGames:Pe,resetGame:function(){_(25),De.stop(),U(""),J(""),Z(""),z(!0),ne([]),ge([]),ye("25:00"),Oe(!1),Ce(!1),ue({dark:0,light:0})}}):r.a.createElement(m.a,{to:"/"})),r.a.createElement(m.b,{path:"/subs"},b?r.a.createElement(O,{userID:b}):r.a.createElement(m.a,{to:"/"})),r.a.createElement(m.b,{path:"/teams"},b?r.a.createElement(G,{teams:k,setTeams:N,localDB:y}):r.a.createElement(m.a,{to:"/"})),r.a.createElement(m.b,{path:"/games"},r.a.createElement(F,{allGameHistory:D,setAllGameHistory:w,saveAllGames:Pe}))),r.a.createElement("div",{className:"bottom-nav"},r.a.createElement(o.c,{className:"nav-link",to:"/",exact:!0,activeClassName:"nav-active"},"Home"),r.a.createElement(o.c,{className:"nav-link",to:"/stats",activeClassName:"nav-active"},"Stats"),r.a.createElement(o.c,{className:"nav-link",to:"/subs",activeClassName:"nav-active"},"Subs"),r.a.createElement(o.c,{className:"nav-link",to:"/teams",activeClassName:"nav-active"},"Teams"),r.a.createElement(o.c,{className:"nav-link",to:"/games",activeClassName:"nav-active"},"Games")),r.a.createElement(v.a,{position:"bottom-center",transition:M,autoClose:!1,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!1,rtl:!1,pauseOnVisibilityChange:!1,draggable:!1,pauseOnHover:!1}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[40,1,2]]]);
//# sourceMappingURL=main.41a9a61a.chunk.js.map